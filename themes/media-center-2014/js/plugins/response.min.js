/*!
 * Response   Responsive design toolkit
 * @link      http://responsejs.com
 * @author    Ryan Van Etten (c) 2011-2012
 * @license   MIT
 * @version   0.6.1
 * @requires  jQuery 1.7+
 *            -or- Jeesh (ender.no.de/#jeesh)
 *            -or- Zepto 0.8+ (zeptojs.com)
 */
(function(a){this["Response"]=a()}(function(at){at=at||this.jQuery||this.Zepto||this.ender;var ax=this,D,ae="Response",O=ax[ae],ac="i"+ae,ah=window,A=document,y=A.documentElement,r=at.domReady||at,ab=at(ah),s=[].slice,g=ah.screen,b=Array.isArray||function(az){return az instanceof Array},al,j,H,ap={},k={},am={},L={all:[]},ak=g.width,ao=g.height,V=ak>ao?ak:ao,u=ak+ao-V,Q=function(){return ak},X=function(){return ao},p=/[^a-z0-9_\-\.]/gi,f=/([a-z])([A-Z])/g,R=/-(.)/g,S=/^data-(.+)$/,c=/\s+/,J=/^[\W\s]+|[\W\s]+$|/g,K=ah.matchMedia||ah.msMatchMedia||Object,z=Object.create||function(aA){function az(){}az.prototype=aA;return new az()},Y=function(az,aA){aA=aA||ae;return az.replace(J,"")+"."+aA.replace(J,"")},N={allLoaded:Y("allLoaded"),crossover:Y("crossover")};function aq(){return y.clientWidth}function au(){return y.clientHeight}function w(az){throw new TypeError(az||ae)}function P(az){return typeof az==="string"?az.split(c):b(az)?az:[]}function e(az){return az.replace(S,"$1").replace(R,function(aA,aB){return aB.toUpperCase()})}function ag(az){return"data-"+(az?az.replace(S,"$1").replace(f,"$1-$2").toLowerCase():az)}function ai(az){return !az?false:az.nodeType===1?az:az[0]&&az[0].nodeType===1?az[0]:false}function q(aA,aE,aC){var aD=[],aB=-1,az=aA.length;while(aB++<az){if(aB in aA){aD[aB]=aE.call(aC,aA[aB])}}return aD}function ar(aA,aC){var aB,az=aA.length;for(aB=0;aB<az;aB++){if(aB in aA){aC(aA[aB],aB,aA)}}return aA}function U(az,aC,aD){var aB=[],aA=az.length;aC=aC||"";aD=aD||"";while(aA&&aA--){if(aA in az){aB[aA]=aC+az[aA]+aD}}return aB}function W(aA,aE,aD){var aC=-1,aB=[],az=aA.length;if(aE){aD=!!aD;while(aC++<az){if(aD===!aE(aA[aC],aC)){aB.push(aA[aC])}}}else{while(aC++<az){if(aA[aC]){aB.push(aA[aC])}}}return aB}function T(az){var aA;return(!az||typeof az!=="string"?az:"true"===az?true:"false"===az?false:"undefined"===az?aA:"null"===az?null:(aA=parseFloat(az))===+aA?aA:az)}function t(aE,aF,aD){if(aE&&aF){var aB,az=aF.length,aC="hasOwnProperty",aA;if(!isFinite(az)||typeof aF==="function"){aA=!!aF[aC];for(aB in aF){if((!aA||aF[aC](aB))&&(aD||aF[aB])){aE[aB]=aF[aB]}}}else{for(aB=0;aB<az;aB++){if(aB in aF&&(aD||aF[aB])){aE[aB]=aF[aB]}}}}return aE}function G(aA,az){return aA&&typeof aA==="object"&&typeof aA.length==="number"?ar(aA,az):az(aA)}function m(az){return function(aB,aA){var aC=az();aB=aC>=(aB||0);return !aA?aB:aB&&aC<=aA}}j=m(aq);H=m(au);ap.band=m(Q);ap.wave=m(X);function aw(aA,aD){var aE=arguments.length,aB=ai(this),az={},aC=false,aF;if(aE){if(b(aA)){aC=true;aA=aA[0]}if(typeof aA==="string"){aA=ag(aA);if(1===aE){az=aB.getAttribute(aA);return aC?T(az):az}if(this===aB||2>(aF=this.length||1)){aB.setAttribute(aA,aD)}else{while(aF--){if(aF in this){aw.apply(this[aF],arguments)}}}}else{if(aA instanceof Object){for(aF in aA){if(aA.hasOwnProperty(aF)){aw.call(this,aF,aA[aF])}}}}return this}if(aB.dataset&&DOMStringMap){return aB.dataset}ar(aB.attributes,function(aG){if(aG&&(aF=String(aG.name).match(S))){az[e(aF[1])]=aG.value}});return az}function an(az){if(this&&typeof az==="string"){az=P(az);G(this,function(aA){ar(az,function(aB){if(aB){aA.removeAttribute(ag(aB))}})})}return this}function C(aA,az,aB){return aw.apply(aA,s.call(arguments,1))}function aa(aA,az){return an.call(aA,az)}function a(){return window.pageXOffset||y.scrollLeft}function ay(){return window.pageYOffset||y.scrollTop}function x(az,aB){var aA=az.getBoundingClientRect?az.getBoundingClientRect():{};aB="number"===typeof aB?aB:0;return{top:(aA.top||0)-aB,left:(aA.left||0)-aB,bottom:(aA.bottom||0)+aB,right:(aA.right||0)+aB}}function I(aA,aB){var az=x(ai(aA),aB);return !!az&&az.right>=0&&az.left<=aq()}function F(aA,aB){var az=x(ai(aA),aB);return !!az&&az.bottom>=0&&az.top<=au()}function h(aA,aB){var az=x(ai(aA),aB);return !!az&&az.bottom>=0&&az.top<=au()&&az.right>=0&&az.left<=aq()}function d(az){var aA=ah.devicePixelRatio;if(!arguments.length){return aA||(d(2)?2:d(1.5)?1.5:d(1)?1:0)}if(!isFinite(az)){return false}if(aA){return aA>=az}az="only all and (min--moz-device-pixel-ratio:"+az+")";return !K?false:K(az).matches||K(az.replace("-moz-","")).matches}function aj(aA){var az={img:1,input:1,source:3,embed:3,track:3,iframe:5,audio:5,video:5,script:5},aB=az[aA.tagName.toLowerCase()]||-1;return 4>aB?aB:typeof aA.getAttribute("src")==="string"?5:-5}function av(aD,aB,az){(aD&&aB)||w("store");var aC,aA=aD.length;az=!!az;if(aA){while(aA--){if(aA in aD){aC=aD[aA];if(az||!C(aC,aB)){C(aC,aB,(0<aj(aC)?aC.getAttribute("src"):at(aC).html()||""))}}}}return D}function E(aB){var aA=[],az=aB.length;while(az&&az--){if(aB[az]){aA[az]="["+ag(aB[az].replace(J,"").replace(".","\\."))+"]"}}return aA.join()}function Z(az){return at(E(P(az)))}function af(aA,az){return aA&&az&&az.length?q(P(az),aw,aA):[]}function o(aA,az){if(typeof aA==="string"&&typeof az==="function"){k[aA]=az;
am[aA]=1}return D}al=(function(){var aC=N.crossover,az=[],aA=Math.min;function aB(aD){return typeof aD==="string"?aD.toLowerCase().replace(p,""):""}return{e:0,$e:0,mode:0,breakpoints:0,prefix:0,prop:"width",keys:[],dynamic:0,custom:0,values:[],fn:0,verge:null,newValue:0,currValue:1,aka:0,lazy:0,i:0,selector:0,valid8:function(){var aD,aG,aE,aF;if(b(aD=this.breakpoints)){aD=(aE=aD.length===W(aD,isFinite).length)?aD.sort(function(aI,aH){return(aI-aH)}):W(aD,function(aH){return !!aH||0===aH});aD.length||w("create @breakpoints")}else{aF={width:[0,320,481,641,961,1025,1281],height:[0,481],ratio:[1,1.5,2]};aG=this.prop;aD=aF[aG]||aF[aG.split("-").pop()]||w("create @prop")}this.breakpoints=aE?W(aD,function(aH){return aH<=V}):aD},reset:function(){var aE=this.breakpoints,aF=aE.length,aD=0;az=[true];while(!aD&&aF--){if(this.memoize(aE[aF])){aD=aF}}if(aD!==this.i){ab.trigger(aC).trigger(this.prop+aC);this.i=aD||0}return this},memoize:function(aD){var aE=az[aD];if(aE!==!!aE){az[aD]=aE=!!this.fn(aD)}return aE},configure:function(aF){var aH,aJ,aG=this,aE,aI,aD;t(aG,aF,true);aG.verge=isFinite(aG.verge)?aG.verge:aA(V,500);aG.fn=k[aG.prop]||w("create @fn");if(aG.dynamic===0){aG.dynamic=!!("device"!==aG.prop.substring(0,6))}aG.custom=am[aG.prop];aJ=aG.prefix?W(q(P(aG.prefix),aB)):["min-"+aG.prop+"-"];aE=1<aJ.length?aJ.slice(1):0;aG.prefix=aJ[0];aG.valid8();aG.keys=U(aG.breakpoints,aG.prefix);aG.aka=false;if(aE){aI=[];aH=aE.length;while(aH--){aI.push(U(aG.breakpoints,aE[aH]))}aG.aka=aI}L[aG.prop]=aD=[].concat.apply(aG.keys,aG.aka||[]);L.all=L.all.concat(aD);aG.selector=E(aD);return aG},target:function(){this.$e=at(this.selector);av(this.$e,ac);this.keys.push(ac);return this},decideValue:function(){var aF=null,aD=this.breakpoints,aG=aD.length,aE=aG;while(aF==null&&aE--){if(this.memoize(aD[aE])){aF=this.values[aE]}}this.newValue=typeof aF==="string"?aF:this.values[aG];return this},prepareData:function(aE){this.e=aE;this.$e=at(aE);this.mode=aj(this.e);this.values=af(this.$e,this.keys);if(this.aka){var aD=this.aka.length;while(aD--){this.values=t(this.values,af(this.$e,this.aka[aD]))}}return this.decideValue()},updateDOM:function(){if(this.currValue===this.newValue){return this}this.currValue=this.newValue;0<this.mode?this.e.setAttribute("src",this.newValue):this.$e.html(this.newValue);return this}}}());k.width=j;k.height=H;k["device-width"]=ap.band;k["device-height"]=ap.wave;k["device-pixel-ratio"]=d;function i(az){ab.on("resize",az);return D}function v(aB,aC){var az=N.crossover,aA=aC?aC+az:az;ab.on(aA,aB);return D}function ad(az){G(az,function(aA){r(aA);i(aA)});return D}function n(az){G(az,function(aA){aA===Object(aA)||w("create @args");var aE=z(al).configure(aA),aF,aG=aE.verge,aD=aE.breakpoints,aC=Y("scroll"),aB=Y("resize");if(!aD.length){return}aF=aD[0]||aD[1]||false;r(function(){var aH=N.allLoaded,aJ=!!aE.lazy;ar(aE.target().$e,function(aM,aL){aE[aL]=z(aE).prepareData(aM);if(!aJ||h(aE[aL].$e,aG)){aE[aL].updateDOM()}});function aI(){aE.reset();ar(aE.$e,function(aM,aL){aE[aL].decideValue().updateDOM()}).trigger(aH)}if(aE.dynamic&&(aE.custom||aF<V)){i(aI,aB)}if(!aJ){return}function aK(){ar(aE.$e,function(aM,aL){if(h(aE[aL].$e,aG)){aE[aL].updateDOM()}})}ab.on(aC,aK);aE.$e.one(aH,function(){ab.off(aC,aK)})})});return D}function M(az){ax[ae]=O;typeof az==="function"&&az.call(ax,D);return D}function B(az,aA,aB){ar(["inX","inY","inViewport"],function(aC){(aB||!aA[aC])&&(aA[aC]=function(aE,aD){return az(W(this,function(aF){return aF&&!aD===D[aC](aF,aE)}))})})}function l(az,aA){if((typeof az==="function"&&az.fn)||(!arguments.length&&(az=at))){if(aA||!az.fn.dataset){az.fn.dataset=aw}if(aA||!az.fn.deletes){az.fn.deletes=an}B(az,az.fn,aA)}return D}D={deviceMin:function(){return u},deviceMax:function(){return V},sets:function(az){return at(E(L[az]||L.all))},noConflict:M,chain:l,bridge:l,create:n,addTest:o,datatize:ag,camelize:e,render:T,store:av,access:af,target:Z,object:z,crossover:v,action:ad,resize:i,ready:r,affix:U,sift:W,dpr:d,deletes:aa,scrollX:a,scrollY:ay,deviceW:Q,deviceH:X,device:ap,inX:I,inY:F,route:G,merge:t,media:K,wave:H,band:j,map:q,each:ar,inViewport:h,dataset:C,viewportH:au,viewportW:aq};r(function(aA){aA=C(A.body,"responsejs");if(aA){var az=ah.JSON&&JSON.parse;aA=az?JSON.parse(aA):at.parseJSON?at.parseJSON(aA):{};if(aA.create){n(aA.create)}}y.className=y.className.replace(/(^|\s)(no-)?responsejs(\s|$)/,"$1$3")+" responsejs "});return l(at)}));