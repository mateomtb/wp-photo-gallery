/*!
 * Tiny Scrollbar 1.65
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 10 / 05 / 2011
 * Depends on library: jQuery
 *
 */
(function(d){d.tiny=d.tiny||{};d.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,size:"auto",sizethumb:"auto"}};d.fn.tinyscrollbar=function(a){var a=d.extend({},d.tiny.scrollbar.options,a);this.each(function(){d(this).data("tsb",new c(d(this),a))});return this};d.fn.tinyscrollbar_update=function(a){return d(this).data("tsb").update(a)};function c(I,R){var M=this;var P=I;var B=d(".viewport",I);var G=d(".overview",I);var V=d(".scrollbar",I);var J=d(".track",V);var C=d(".thumb",V);var O=R.axis=="x",K=O?"left":"top",D=O?"Width":"Height";var H,T,a,N,b={start:0,now:0},L={};this.active=function(){return M.contentRatio<1};function U(){M.update();F();return M}this.update=function(i){var e=B[0]["offset"+D];var f=G[0]["scroll"+D];a=f-e;M.contentRatio=e/f;V.toggleClass("disable",!M.active());var h=R.size=="auto"?e:R.size;var j=Math.min(h,Math.max(0,(R.sizethumb=="auto"?(h*M.contentRatio):R.sizethumb)));T=h-j;N=R.sizethumb=="auto"?(f/h):a/T;if(M.active()&&i=="relative"){H=Math.min(a,Math.max(0,H))}else{if(M.active()<=1&&i=="bottom"){H=a}else{H=isNaN(parseInt(i))?0:parseInt(i)}}C.css(K,H/N);G.css(K,-H);L.start=C.offset()[K];var g=D.toLowerCase();V.css(g,h);J.css(g,h);C.css(g,j)};function F(){C.bind("mousedown",Q);C[0].ontouchstart=function(e){e.preventDefault();C.unbind("mousedown");Q(e.touches[0]);return false};J.bind("mouseup",E);if(R.scroll&&this.addEventListener){P[0].addEventListener("DOMMouseScroll",A,false);P[0].addEventListener("mousewheel",A,false)}else{if(R.scroll){P[0].onmousewheel=A}}}function Q(e){L.start=O?e.pageX:e.pageY;var f=parseInt(C.css(K));b.start=f=="auto"?0:f;d(document).bind("mousemove",E);document.ontouchmove=function(g){d(document).unbind("mousemove");E(g.touches[0])};d(document).bind("mouseup",S);C.bind("mouseup",S);C[0].ontouchend=document.ontouchend=function(g){d(document).unbind("mouseup");C.unbind("mouseup");S(g.touches[0])};return false}function A(f){if(M.active()){f=d.event.fix(f||window.event);var e=f.wheelDelta?f.wheelDelta/120:-f.detail/3;H-=e*R.wheel;H=Math.min(a,Math.max(0,H));C.css(K,H/N);G.css(K,-H);f.preventDefault()}}function S(e){d(document).unbind("mousemove",E).unbind("mouseup",S);C.unbind("mouseup",S);document.ontouchmove=C[0].ontouchend=document.ontouchend=null;return false}function E(e){if(M.active()){b.now=Math.min(T,Math.max(0,(b.start+((O?e.pageX:e.pageY)-L.start))));H=b.now*N;G.css(K,-H);C.css(K,b.now)}return false}return U()}})(jQuery);